{"version":3,"sources":["components/Blog.js","components/Notifications.js","components/Togglable.js","components/BlogForm.js","components/LoginForm.js","components/LogoutForm.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["UserInfo","user","loggedUser","deleteBlog","className","name","id","onClick","Likes","likes","addLike","Blog","blog","likeBlog","useState","showAll","setShowAll","hideWhenVisible","display","showWhenVisible","toggleVisibility","String","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","title","author","href","url","prototypes","PropTypes","object","isRequired","blogs","array","setBlogs","Notification","message","error","Togglable","React","forwardRef","props","ref","visible","setVisible","useImperativeHandle","buttonLabel","children","displayName","string","BlogForm","createBlog","setTitle","setAuthor","setUrl","onSubmit","event","preventDefault","type","value","onChange","target","LoginForm","handleSubmit","handleUsernameChange","handlePasswordChange","username","password","LogoutForm","blogService","setUser","window","localStorage","removeItem","setToken","baseUrl","token","getAll","axios","get","then","response","data","create","newObject","a","config","headers","Authorization","post","update","blogObject","put","delete","newToken","login","creds","App","setMessage","setError","useEffect","loggedUserJSON","getItem","JSON","parse","sortByLikes","b","userObject","loginService","setItem","stringify","setTimeout","blogFormRef","current","addedBlog","concat","find","likedBlog","map","console","confirm","filter","createRef","loginUser","Notifications","sort","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ae019b86.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\n\r\nconst UserInfo = ({ user, loggedUser, deleteBlog }) => (\r\n  <div className=\"userInfo\">\r\n    {user.name}\r\n    <br />\r\n    {user.id !== loggedUser.id\r\n      ? null\r\n      : <button onClick={deleteBlog} id=\"remove-button\">remove</button>\r\n    }\r\n  </div>\r\n)\r\n\r\nconst Likes = ({ likes, addLike }) => (\r\n  <div className=\"likes\">\r\n    likes {likes}\r\n    <button onClick={addLike} id=\"like-button\">like</button>\r\n  </div>\r\n)\r\n\r\nconst Blog = ({ blog, loggedUser, likeBlog, deleteBlog }) => {\r\n  const [showAll, setShowAll] = useState(false)\r\n\r\n  const hideWhenVisible = { display: showAll ? 'none' : '' }\r\n  const showWhenVisible = { display: showAll ? '' : 'none' }\r\n\r\n  const blogStyle = {\r\n    paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n\r\n  const toggleVisibility = () => {\r\n    setShowAll(!showAll)\r\n  }\r\n\r\n  const user = typeof blog.user !== String\r\n    ? blog.user : null\r\n\r\n  return (\r\n    <div style={blogStyle} className=\"blog\">\r\n      <div style={hideWhenVisible} className=\"hiddenBlog\">\r\n        {blog.title} {blog.author}\r\n        <button onClick={toggleVisibility} id=\"view-button\">view</button>\r\n      </div>\r\n      <div style={showWhenVisible} className=\"blogInfo\">\r\n        {blog.title} {blog.author}\r\n        <button onClick={toggleVisibility} id=\"hide-button\">hide</button>\r\n        <br />\r\n        <a href={blog.url}>{blog.url}</a>\r\n        <Likes likes={blog.likes} addLike={likeBlog} />\r\n        <UserInfo user={user} loggedUser={loggedUser} deleteBlog={deleteBlog} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nBlog.prototypes = {\r\n  blog: PropTypes.object.isRequired,\r\n  blogs: PropTypes.array.isRequired,\r\n  setBlogs: PropTypes.isRequired\r\n}\r\n\r\nexport default Blog","import React from 'react'\r\n\r\nconst Notification = ({ message, error }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  if (!error) {\r\n    return (\r\n      <div className=\"success\">\r\n        {message}\r\n      </div>)\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React, { useState, useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nTogglable.displayName = 'Togglable'\r\n\r\nTogglable.prototypes = {\r\n  buttonLabel: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Togglable","import React, { useState } from 'react'\r\n\r\nconst BlogForm = ({ createBlog }) => {\r\n  const [title, setTitle] = useState('')\r\n  const [author, setAuthor] = useState('')\r\n  const [url, setUrl] = useState('')\r\n\r\n  const addBlog = (event) => {\r\n    event.preventDefault()\r\n    createBlog({\r\n      title: title,\r\n      author: author,\r\n      url: url,\r\n    })\r\n\r\n    setTitle('')\r\n    setAuthor('')\r\n    setUrl('')\r\n  }\r\n\r\n  return (\r\n    <div className=\"formDiv\">\r\n      <h2>create new</h2>\r\n      <form onSubmit={addBlog}>\r\n        <div>\r\n          title:\r\n          <input\r\n            id=\"title\"\r\n            type=\"text\"\r\n            value={title}\r\n            name=\"Title\"\r\n            onChange={({ target }) => setTitle(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          author:\r\n          <input\r\n            id=\"author\"\r\n            type=\"text\"\r\n            value={author}\r\n            name=\"Author\"\r\n            onChange={({ target }) => setAuthor(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          url:\r\n          <input\r\n            id=\"url\"\r\n            type=\"text\"\r\n            value={url}\r\n            name=\"Url\"\r\n            onChange={({ target }) => setUrl(target.value)}\r\n          />\r\n        </div>\r\n        <button type=\"submit\" id=\"blog-button\">create</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BlogForm","import React from 'react'\r\n\r\nconst LoginForm = ({\r\n  handleSubmit,\r\n  handleUsernameChange,\r\n  handlePasswordChange,\r\n  username,\r\n  password\r\n}) => {\r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n         username\r\n          <input\r\n            value={username}\r\n            onChange={handleUsernameChange}\r\n          />\r\n        </div>\r\n        <div>\r\n         password\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n          />\r\n        </div>\r\n        <button type=\"submit\">login</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginForm","import React from 'react'\r\n\r\nconst LogoutForm = ({ blogService, user, setUser }) => {\r\n  const logout = () => {\r\n    window.localStorage.removeItem('loggedBlogappUser')\r\n    blogService.setToken(null)\r\n    setUser(null)\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={logout}>\r\n      {user.name} logged in\r\n      <button type=\"submit\">logout</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default LogoutForm","import axios from 'axios'\r\nconst baseUrl = '/api/blogs'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = async newObject => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n  const response = await axios.post(baseUrl, newObject, config)\r\n  return response.data\r\n}\r\n\r\nconst update = async (id, blogObject) => {\r\n  const response = await axios.put(`${baseUrl}/${id}`, blogObject)\r\n  return response.data\r\n}\r\n\r\nconst deleteBlog = async (id) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n  const response = await axios.delete(`${baseUrl}/${id}`, config)\r\n  return response.data\r\n}\r\n\r\nexport default { getAll, create, update, deleteBlog, setToken }","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async creds => {\r\n  const response = await axios.post(baseUrl, creds)\r\n  return response.data\r\n}\r\n\r\nexport default { login }","import React, { useState, useEffect } from 'react'\r\nimport Blog from './components/Blog'\r\nimport Notifications from './components/Notifications'\r\nimport Togglable from './components/Togglable'\r\nimport BlogForm from './components/BlogForm'\r\nimport LoginForm from './components/LoginForm'\r\nimport LogoutForm from './components/LogoutForm'\r\nimport blogService from './services/blogs'\r\nimport loginService from './services/login'\r\n\r\nconst App = () => {\r\n  const [blogs, setBlogs] = useState([])\r\n  const [message, setMessage] = useState(null)\r\n  const [user, setUser] = useState(null)\r\n  const [error, setError] = useState(null)\r\n\r\n\r\n  useEffect(() => {\r\n    blogService.getAll()\r\n      .then(blogs =>\r\n        setBlogs(blogs)\r\n      )\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\r\n    if (loggedUserJSON) {\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n      blogService.setToken(user.token)\r\n    }\r\n  }, [])\r\n\r\n  const sortByLikes = (a, b) => {\r\n    return b.likes - a.likes\r\n  }\r\n\r\n  const login = async (userObject) => {\r\n    try {\r\n      const user = await loginService.login(userObject)\r\n      window.localStorage.setItem(\r\n        'loggedBlogappUser', JSON.stringify(user)\r\n      )\r\n      blogService.setToken(user.token)\r\n      setUser(user)\r\n    } catch (e) {\r\n      setError(true)\r\n      setMessage('wrong username or password')\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n        setError(false)\r\n      }, 2000)\r\n    }\r\n  }\r\n\r\n  const createBlog = async (blogObject) => {\r\n    blogFormRef.current.toggleVisibility()\r\n    const addedBlog = await blogService.create(blogObject)\r\n    setBlogs(blogs.concat(addedBlog))\r\n    setError(false)\r\n    setMessage(`a new blog ${addedBlog.title} by ${addedBlog.author}`)\r\n    setTimeout(() => {\r\n      setMessage(null)\r\n    }, 2000)\r\n  }\r\n\r\n  const likeBlog = async (id) => {\r\n    const blog = blogs.find(b => b.id === id)\r\n    try {\r\n      const likedBlog = { ...blog, likes: blog.likes + 1 }\r\n      await blogService.update(id, likedBlog)\r\n      setBlogs(blogs.map(b => b.id !== id ? b : likedBlog))\r\n      setError(false)\r\n      setMessage(`liked ${likedBlog.title} by ${likedBlog.author}`)\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 2000)\r\n    } catch (e) {\r\n      console.error('Failed to like blog', { blog })\r\n    }\r\n  }\r\n\r\n  const deleteBlog = async (id) => {\r\n    const blog = blogs.find(b => b.id === id)\r\n    if (window.confirm(`Remove blog ${blog.title} by ${blog.author}`)) {\r\n      try {\r\n        await blogService.deleteBlog(id)\r\n        setBlogs(blogs.filter(b => b.id !== id))\r\n      } catch (e) {\r\n        console.error('Poistaminen epäonnistui', { blog })\r\n      }\r\n    }\r\n  }\r\n\r\n  const blogFormRef = React.createRef()\r\n\r\n  const content = () => (\r\n    <div>\r\n      <h2>blogs</h2>\r\n      <Notifications message={message} error={error} />\r\n      <LogoutForm blogService={blogService} user={user} setUser={setUser} />\r\n      <Togglable buttonLabel=\"new blog\" ref={blogFormRef}>\r\n        <BlogForm createBlog={createBlog} />\r\n      </Togglable>\r\n      {blogs.sort(sortByLikes).map(blog =>\r\n        <Blog key={blog.id} blog={blog} loggedUser={user} likeBlog={() => likeBlog(blog.id)} deleteBlog={() => deleteBlog(blog.id)} />\r\n      )}\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      {user === null\r\n        ? <LoginForm loginUser={login} message={message} error={error} />\r\n        : content()\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './App.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}